<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PRESS PLAY · Video Game Visualisation Dashboard</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet" />

  <!-- Stylesheet -->
  <link rel="stylesheet" href="view/css/global.css" />

  <!-- Vega stack -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>

<body>
  <!-- ===== HEADER ===== -->
  <header class="banner" role="banner">
    <div class="brand">
      <div class="dot" aria-hidden="true"></div>
      <h1 class="title">PRESS PLAY</h1>
    </div>
    <a class="gh" href="https://github.com/chicomonster03/press_play" target="_blank" rel="noopener noreferrer">
      <img src="static/github.png" alt="GitHub"/>
      <span>Github Repo</span>
    </a>
  </header>

  <!-- ===== MAIN CONTENT ===== -->
  <main class="page" id="main" role="main">
    <p class="intro note">
      A flexible 4-column layout for Vega-Lite visualisations, allowing quarter-, half-, three-quarter-, and full-width sections.
      Resize your window to see how it collapses gracefully.
    </p>

    <section class="vis-grid" aria-label="Visualisation grid">

      <!-- Row 1: quarter text + three-quarter chart -->
      <div class="text-block span-1">
        <p>Japan leads global RPG development, with dense clusters of studios near Tokyo and Osaka.</p>
      </div>

      <article class="card span-3" aria-labelledby="dev-map-h">
        <header>
          <h2 id="dev-map-h">Game Developers by Country</h2>
          <span class="label">Map</span>
        </header>
        <p class="desc">Number of development companies per country. Darker regions = denser clusters.</p>
        <div class="vis-wrapper vis-4x3" aria-label="Developers map">
          <div id="vis-developers-map" class="vega-host"></div>
        </div>
      </article>

      <!-- Row 2: half + half -->
      <article class="card span-2" aria-labelledby="hltb-h">
        <header>
          <h2 id="hltb-h">HLTB: Main vs Completionist</h2>
          <span class="label">Dumbbell</span>
        </header>
        <p class="desc">Compare Main Story and Completionist playtimes for popular titles.</p>
        <div class="vis-wrapper vis-4x3" aria-label="HLTB dumbbell">
          <div id="vis-hltb" class="vega-host"></div>
        </div>
      </article>

      <article class="card span-2" aria-labelledby="map2-h">
        <header>
          <h2 id="map2-h">Game Companies by Country</h2>
          <span class="label">Map</span>
        </header>
        <p class="desc">Alternate choropleth showing company counts by nation.</p>
        <div class="vis-wrapper vis-4x3" aria-label="Companies map">
          <div id="vis-map2" class="vega-host"></div>
        </div>
      </article>

      <!-- Separator -->
      <div class="separator"><span class="sep-icon"></span></div>

      <!-- Row 3: full-width explanation -->
      <div class="text-block span-4">
        <p>
          Developer density and genre distribution reveal clear geographic trends. 
          RPGs dominate in Japan, shooters in the US, and indie titles in Western Europe.
        </p>
      </div>

      <!-- Row 4: three-quarter visual + quarter text -->
      <article class="card span-3 tall" aria-labelledby="scatter-h">
        <header>
          <h2 id="scatter-h">Review Score vs Story Length</h2>
          <span class="label">Scatter</span>
        </header>
        <p class="desc">Shows correlation between review scores and average story length.</p>
        <div class="vis-wrapper vis-16x9" aria-label="Score vs length">
          <div id="vis-scatter" class="vega-host"></div>
        </div>
      </article>

      <!-- Separator -->
      <div class="separator"><span class="sep-icon"></span></div>

      <div class="text-block span-1">
        <p>Shorter, more replayable titles often receive higher aggregate ratings.</p>
      </div>

      <!-- Row 5: full-width chart -->
      <article class="card span-4" aria-labelledby="timeline-h">
        <header>
          <h2 id="timeline-h">Genre Evolution Over Time</h2>
          <span class="label">Line</span>
        </header>
        <p class="desc">Genre trends based on game releases from 1980–2025.</p>
        <div class="vis-wrapper vis-16x9">
          <div id="vis-timeline" class="vega-host"></div>
        </div>
      </article>

    </section>
  </main>

  <!-- ===== VEGA EMBED LOADER ===== -->
  <script>
    function mountVega(selector, specPath) {
      return vegaEmbed(selector, specPath, {
        actions: false,
        renderer: 'canvas',
        config: {
          background: 'transparent',
          axis: { labelColor: '#e6e6e6', titleColor: '#e6e6e6', domainColor: '#4b4d55', tickColor: '#4b4d55' },
          legend: { labelColor: '#e6e6e6', titleColor: '#e6e6e6' },
          title: { color: '#e6e6e6' }
        }
      }).catch((e) => console.warn('[Vega error]', specPath, e));
    }

    window.addEventListener('DOMContentLoaded', () => {
      mountVega('#vis-developers-map', 'specs/developers_map_spec.json');
      mountVega('#vis-hltb', 'specs/hltb_dumbbell_spec.json');
      mountVega('#vis-map2', 'map_spec.json');
      mountVega('#vis-scatter', 'storytime_vs_score_spec.json');
      mountVega('#vis-timeline', 'specs/genre_timeline_spec.json');
    });
  </script>
</body>
</html>